
# 网络寻址

## IP 地址和子网掩码

IP 地址是用于标识特定主机的逻辑地址，为了与 Internet 上其它设备通信，它必须唯一、不冲突

!!! info "每个网卡NIC都有各自的 IP 地址"

### IPv4

IP 地址是一个 32 位二进制 01 串，以八位为一组，划分为四个八位字节，每个字节以十进制数表示，中间用点号分割，即 ==点分十进制记法==

IP 地址具有层次性，前面部分标识主机所在的网络，后面部分标识该网络中特定的主机。两部分的位数对于不同用途有着不同分配，子网掩码用来表明 IP 地址中，哪一部分代表网络，哪一部分代表主机：IP 与子网掩码按位与操作，所得的部分即为网络部分

!!! example
	例如 IP 地址 192.169.1.100 与其子网掩码 255.255.255.0 
	
	其网络部分为 192.169.1 ，主机部分为 100

除此之外，还可以用前缀长度的方式表示子网掩码，即 "/" 后紧跟着为 1 的位数。如上例中 IP 地址及其子网掩码可以表示为 `192.169.1.100/24`

但是需要注意，主机部分全部为 0 的 IP 地址是该网络的网络地址；主机部分全部为 1 的 IP 地址是该网络的广播地址。这两个地址不能分配给具体的主机。

!!! info "所以计算子网掩码对应网络可存在主机数量时，要减去 2"

IPv4 地址可以分为五类，其中 A、B、C 类是商业类用途，可分配主机；D 类仅保留供组播使用；E 类保留用于实验用途。

![[IPv4分类.png]]

为了延缓 IPv4 地址耗尽，组织内部可以使用私有地址进行通信，但是私有地址不能连接 Internet ，需要经过网络地址转换（NAT）变成共有地址才能在 Internet 通信。

- 借助 NAT ，可将传出数据包的私有源 IP 地址转换为公有源 IP 地址
- 借助 NAT ，可将传入数据包的公有目的 IP 地址转换为私有目的 IP 地址

无线路由器的 WAN 口一般是公有地址，LAN 口是私有地址，因此它们的 IP 地址必须属于不同网络，即 **网络部分不同**。

### IPv6

IPv4 地址早在2011年2月就被ICANN分配殆尽，我们需要更大的地址空间！

IPv6 地址是一个 128 位的二进制数值，一般以 32 个 16 进制数字表示，其一般格式为：`xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx`

- 字段中的前导 0 可以省略，例如 09C0 可写作 9C0
- 连续的零字段可表示为 :: ，但每个地址只能用一次 ::

示例：

- 0:0:0:0:0:0:0:1 表示为 ::1 ，即 localhost
- 2031:0000:130F:0000:0000:09C0:876A:130B
	- 可表示为 2031:0:130F::9C0:876A:130B

IPv6 使用前缀长度表示地址的前缀部分（相当于网络部分），典型的前缀长度为 /64 。剩余部分统称为接口 ID （相当于主机部分）

如 2001:DB8:A::/64


